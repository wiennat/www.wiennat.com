<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>java on wiennat</title><link>https://www.wiennat.com/tags/java/</link><description>Recent content in java on wiennat</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 25 Apr 2022 11:30:00 +0900</lastBuildDate><atom:link href="https://www.wiennat.com/tags/java/index.xml" rel="self" type="application/rss+xml"/><item><title>โค้ดสำหรับทำสอบ Connection reset by peer</title><link>https://www.wiennat.com/posts/test-connection-reset-by-peer/</link><pubDate>Mon, 25 Apr 2022 11:30:00 +0900</pubDate><guid>https://www.wiennat.com/posts/test-connection-reset-by-peer/</guid><description>หลายเดือนก่อนเจอปัญหาที่แก้ไม่ตกว่าทำไมอยู่ๆ ก็มี log ที่ API Server ที่เขียนด้วย Kotlin บอกว่าดึงข้อมูลไม่ได้ออกมาเต็มไปหมด พอเช็คในรายละเอียดของ log พบว่าทุกอันชี้ไปที่สาเหตุเดียวกันหมดคือ MonoCoroutine was canceled แต่ก็ไม่ได้มีรายละเอียดอะไรมากไปกว่านั้น หลังจากหามาอยู่สองเดือนก็เดาว่ามันน่าจะเกิดจากการที่อีกฝั่งตัดการเชื่อมต่อไปโดยไม่บอก (Connection reset by peer) เลยไปตามหาโค้ดที่ใช้ทดสอบมาเป็น Java ประมาณนี้
package net.onedd; import java.io.BufferedReader; import java.io.InputStreamReader; import java.io.PrintWriter; import java.net.Socket; public class Application { public static void main(String[] args) throws Exception { System.out.println(&amp;#34;starting&amp;#34;); Socket s = new Socket(&amp;#34;localhost&amp;#34;, 5000); PrintWriter out = new PrintWriter(s.getOutputStream(), true); BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream())); out.println(&amp;#34;GET /echo?m=a HTTP/1.1&amp;#34;); out.println(&amp;#34;&amp;#34;); } }</description></item></channel></rss>